/*!-----------------------------------------------------------------------------
 * Vegas - Fullscreen Backgrounds and Slideshows.
 * v2.0.0-wip - built 2015-01-23
 * Licensed under the MIT License.
 * http://vegas.jaysalvat.com/
 * ----------------------------------------------------------------------------
 * Copyright (C) 2010-2015 Jay Salvat
 * http://jaysalvat.com/
 * --------------------------------------------------------------------------*/
!function(s){"use strict";var t={slide:0,delay:5e3,preload:!1,preloadImage:!1,preloadVideo:!1,timer:!0,overlay:!1,autoplay:!0,shuffle:!1,fill:!0,color:null,align:"center",valign:"center",transition:"fade",transitionDelay:1e3,init:function(){},play:function(){},pause:function(){},walk:function(){},slides:[]},i={},e=function(i,e){this.elmt=i,this.settings=s.extend({},t,s.vegas.defaults,e),this.slide=this.settings.slide,this.total=this.settings.slides.length,this.noshow=this.total<2,this.paused=!this.settings.autoplay||this.noshow,this.$elmt=s(i),this.$timer=null,this.$overlay=null,this.$slide=null,this.timeout=null,this.transitions=[],this.support={objectFit:"objectFit"in document.body.style,transition:"transition"in document.body.style||"WebkitTransition"in document.body.style,video:s.vegas.isVideoCompatible()};for(var n=0;n<document.styleSheets.length;n++){var o=document.styleSheets[n],a=o.rules?o.rules:o.cssRules;if(/vegas(\..*?)?(\.min)?\.css$/.test(o.href))for(var l=0;l<a.length;l++){var h=a[l],r=/vegas\-transition\-([a-z0-9]*)/gi.exec(h.selectorText);r&&r[1]&&-1===this.transitions.indexOf(r[1])&&this.transitions.push(r[1])}}this.settings.shuffle===!0&&this.shuffle(),this._init()};e.prototype={_init:function(){var t,i,e,n="BODY"===this.elmt.tagName,o=this.settings.timer,a=this.settings.overlay;this._preload(),n||(t=s('<div class="vegas-wrapper">').css("overflow",this.$elmt.css("overflow")).css("padding",this.$elmt.css("padding")),this.$elmt.css("padding")||t.css("padding-top",this.$elmt.css("padding-top")).css("padding-bottom",this.$elmt.css("padding-bottom")).css("padding-left",this.$elmt.css("padding-left")).css("padding-right",this.$elmt.css("padding-right")),t[0].innerHTML=this.elmt.innerHTML,this.elmt.innerHTML=""),o&&this.support.transition&&(e=s('<div class="vegas-timer"><div class="vegas-timer-progress">'),this.$timer=e,this.$elmt.prepend(e)),a&&(i=s('<div class="vegas-overlay">'),"string"==typeof a&&i.css("background-image","url("+a+")"),this.$overlay=i,this.$elmt.prepend(i)),this.$elmt.addClass("vegas-container"),n||this.$elmt.append(t),this.trigger("init"),this._goto(this.slide)},_preload:function(){var s,t,e;for(e=0;e<this.settings.slides.length;e++)(this.settings.preload||this.settings.preloadImages)&&this.settings.slides[e].src&&(t=new Image,t.src=this.settings.slides[e].src),(this.settings.preload||this.settings.preloadVideos)&&this.support.video&&this.settings.slides[e].video&&(s=this._video(this.settings.slides[e].video),s.preload=!0,i[this.settings.slides[e].video.toString()]=s)},_slideShow:function(){var s=this;this.total>1&&!this.paused&&!this.noshow&&(this.timeout=setTimeout(function(){s.next()},this._options("delay")))},_timer:function(s){var t=this;clearTimeout(this.timeout),this.$timer&&(this.$timer.removeClass("vegas-timer-running").find("div").css("transition-duration","0ms"),this.paused||this.noshow||s&&setTimeout(function(){t.$timer.addClass("vegas-timer-running").find("div").css("transition-duration",t._options("delay")-100+"ms")},100))},_video:function(s){var t,e;return i[s.toString()]?i[s.toString()]:(s instanceof Array==!1&&(s=[s]),t=document.createElement("video"),s.forEach(function(s){e=document.createElement("source"),e.src=s,t.appendChild(e)}),t)},_options:function(s,t){return void 0===t&&(t=this.slide),void 0!==this.settings.slides[t][s]?this.settings.slides[t][s]:this.settings[s]},_goto:function(t){function i(){h._timer(!0),setTimeout(function(){h.support.transition&&a.css("transition","all "+c+"ms").addClass("vegas-transition-"+m+"-out"),e.css("transition","all "+c+"ms").addClass("vegas-transition-"+m+"-in"),h.support.transition||e.fadeIn(c);for(var s=0;s<a.length-2;s++)a.eq(s).remove();h.trigger("walk"),h._slideShow()},100)}"undefined"==typeof this.settings.slides[t]&&(t=0),this.slide=t;var e,n,o,a=this.$elmt.children(".vegas-slide"),l=a.length,h=this,r=this.settings.slides[t].src,d=this.settings.slides[t].video,g=this._options("delay"),c=this._options("transitionDelay"),u=this._options("align"),p=this._options("valign"),f=this._options("color")||this.$elmt.css("background-color"),v=this._options("fill")?"cover":"contain",m=this._options("transition"),y="random"===m;if(y&&(m=this.transitions[Math.floor(Math.random()*(this.transitions.length-1))]),"none"!==m&&this.transitions.indexOf(m)<0&&console.error("Vegas: Transition "+m+" doesn't exist."),c>g&&(c=g),this.support.video&&d?(n=this._video(d),n.muted=!0,n.loop=!0,n.autoplay=!0,e=s(n).addClass("vegas-video").addClass("vegas-slide").addClass("vegas-transition-"+m).css("background-color",f),this.support.objectFit?e.css("object-position",u+" "+p).css("object-fit",v).css("width","100%").css("height","100%"):"contain"===v&&e.css("width","100%").css("height","100%")):(o=new Image,o.src=r,e=s("<div></div>").addClass("vegas-slide").addClass("vegas-transition-"+m).css("background-image","url("+r+")").css("background-color",f).css("background-position",u+" "+p).css("background-size",v)),h.support.transition||e.css("display","none"),l?a.eq(l-1).after(e):this.$elmt.prepend(e),a.css("transition","all 0ms").each(function(){this.className=" vegas-slide",this.className+=" vegas-transition-"+m,this.className+=" vegas-transition-"+m+"-in","VIDEO"===this.tagName&&(this.className+=" vegas-video")}),h._timer(!1),n){var _=!1;n.play(),n.oncanplay=function(){_||(_=!0,i())}}else o.onload=i},shuffle:function(){for(var s,t,i=this.total-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),s=this.settings.slides[i],this.settings.slides[i]=this.settings.slides[t],this.settings.slides[t]=s},play:function(){this.paused&&(this.paused=!1,this.next(),this.trigger("play"))},pause:function(){this._timer(!1),this.paused=!0,this.trigger("pause")},toggle:function(){this.paused?this.play():this.pause()},playing:function(){return!this.paused&&!this.noshow},current:function(s){return s?{slide:this.slide,data:this.settings.slides[this.slide]}:this.slide},jump:function(s){0>s||s>this.total-1||s===this.slide||(this.slide=s,this._goto(this.slide))},next:function(){this.slide++,this.slide>=this.total&&(this.slide=0),this._goto(this.slide)},previous:function(){this.slide--,this.slide<0&&(this.slide=this.total-1),this._goto(this.slide)},trigger:function(s){var t=[];"init"!==s&&(t=[this.slide,this.settings.slides[this.slide]]),this.$elmt.trigger("vegas"+s,t),"function"==typeof this.settings[s]&&this.settings[s].apply(this.$elmt,t)},options:function(i,e){var n=this.settings.slides;if("object"==typeof i)this.settings=s.extend({},t,s.vegas.defaults,i);else{if("string"!=typeof i)return this.settings;if(void 0===e)return this.settings[i];this.settings[i]=e}this.settings.slides!==n&&(this.total=this.settings.slides.length,this.noshow=this.total<2,this._preload())}},s.fn.vegas=function(s){var t,i=arguments,n=!1;if(void 0===s||"object"==typeof s)return this.each(function(){this._vegas||(this._vegas=new e(this,s))});if("string"==typeof s){if(this.each(function(){var e=this._vegas;if(!e)throw new Error("No Vegas applied to this element.");"function"==typeof e[s]&&"_"!==s[0]?t=e[s].apply(e,[].slice.call(i,1)):n=!0}),n)throw new Error('No method "'+s+'" in Vegas.');return void 0!==t?t:this}},s.vegas={},s.vegas.defaults=t,s.vegas.isVideoCompatible=function(){return!("ontouchstart"in window||"onmsgesturechange"in window)}}("undefined"!=typeof jQuery?jQuery:"undefined"!=typeof Zepto?Zepto:"undefined"!=typeof Pin?Pin:null);
//# sourceMappingURL=vegas.min.js.map