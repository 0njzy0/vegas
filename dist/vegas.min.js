/*!-----------------------------------------------------------------------------
 * Vegas - Fullscreen Backgrounds and Slideshows.
 * v2.0.0-wip - built 2015-02-20
 * Licensed under the MIT License.
 * http://vegas.jaysalvat.com/
 * ----------------------------------------------------------------------------
 * Copyright (C) 2010-2015 Jay Salvat
 * http://jaysalvat.com/
 * --------------------------------------------------------------------------*/
!function(s){"use strict";var t={slide:0,delay:5e3,preload:!1,preloadImage:!1,preloadVideo:!1,timer:!0,overlay:!1,autoplay:!0,shuffle:!1,cover:!0,color:null,align:"center",valign:"center",transition:"fade",transitionDuration:1e3,animation:null,animationDuration:"auto",init:function(){},play:function(){},pause:function(){},walk:function(){},slides:[]},i={},e=function(i,e){this.elmt=i,this.settings=s.extend({},t,s.vegas.defaults,e),this.slide=this.settings.slide,this.total=this.settings.slides.length,this.noshow=this.total<2,this.paused=!this.settings.autoplay||this.noshow,this.$elmt=s(i),this.$timer=null,this.$overlay=null,this.$slide=null,this.timeout=null,this.transitions=[],this.animations=[],this.support={objectFit:"objectFit"in document.body.style,transition:"transition"in document.body.style||"WebkitTransition"in document.body.style,video:s.vegas.isVideoCompatible()};for(var n=0;n<document.styleSheets.length;n++){var o,a=document.styleSheets[n];try{o=a.cssRules||a.rules}catch(r){continue}if(/vegas(\..*?)?(\.min)?\.css$/.test(a.href))for(var h=0;h<o.length;h++){var d=o[h],l=/vegas\-transition\-([a-z0-9]*)/gi.exec(d.selectorText),c=/vegas\-animation\-([a-z0-9]*)/gi.exec(d.selectorText);l&&l[1]&&-1===this.transitions.indexOf(l[1])&&this.transitions.push(l[1]),c&&c[1]&&-1===this.animations.indexOf(c[1])&&this.animations.push(c[1])}}this.settings.shuffle===!0&&this.shuffle(),this._init()};e.prototype={_init:function(){var t,i,e,n="BODY"===this.elmt.tagName,o=this.settings.timer,a=this.settings.overlay;this._preload(),n||(this.$elmt.css("height",this.$elmt.css("height")),t=s('<div class="vegas-wrapper">').css("overflow",this.$elmt.css("overflow")).css("padding",this.$elmt.css("padding")),this.$elmt.css("padding")||t.css("padding-top",this.$elmt.css("padding-top")).css("padding-bottom",this.$elmt.css("padding-bottom")).css("padding-left",this.$elmt.css("padding-left")).css("padding-right",this.$elmt.css("padding-right")),this.$elmt.clone(!0).children().appendTo(t),this.elmt.innerHTML=""),o&&this.support.transition&&(e=s('<div class="vegas-timer"><div class="vegas-timer-progress">'),this.$timer=e,this.$elmt.prepend(e)),a&&(i=s('<div class="vegas-overlay">'),"string"==typeof a&&i.css("background-image","url("+a+")"),this.$overlay=i,this.$elmt.prepend(i)),this.$elmt.addClass("vegas-container"),n||this.$elmt.append(t),this.trigger("init"),this._goto(this.slide)},_preload:function(){var s,t,e;for(e=0;e<this.settings.slides.length;e++)(this.settings.preload||this.settings.preloadImages)&&this.settings.slides[e].src&&(t=new Image,t.src=this.settings.slides[e].src),(this.settings.preload||this.settings.preloadVideos)&&this.support.video&&this.settings.slides[e].video&&(s=this._video(this.settings.slides[e].video),s.preload=!0,s.muted=!0,i[this.settings.slides[e].video.toString()]=s)},_random:function(s){return s[Math.floor(Math.random()*(s.length-1))]},_slideShow:function(){var s=this;this.total>1&&!this.paused&&!this.noshow&&(this.timeout=setTimeout(function(){s.next()},this._options("delay")))},_timer:function(s){var t=this;clearTimeout(this.timeout),this.$timer&&(this.$timer.removeClass("vegas-timer-running").find("div").css("transition-duration","0ms"),this.paused||this.noshow||s&&setTimeout(function(){t.$timer.addClass("vegas-timer-running").find("div").css("transition-duration",t._options("delay")-100+"ms")},100))},_video:function(s){var t,e;return i[s.toString()]?i[s.toString()]:(s instanceof Array==!1&&(s=[s]),t=document.createElement("video"),s.forEach(function(s){e=document.createElement("source"),e.src=s,t.appendChild(e)}),t)},_options:function(s,t){return void 0===t&&(t=this.slide),void 0!==this.settings.slides[t][s]?this.settings.slides[t][s]:this.settings[s]},_goto:function(t){function i(){r._timer(!0),setTimeout(function(){r.support.transition&&h.css("transition","all "+y+"ms").addClass("vegas-transition-"+v+"-out"),e.css("transition","all "+y+"ms").addClass("vegas-transition-"+v+"-in"),r.support.transition||e.fadeIn(y);for(var s=0;s<h.length-1;s++)h.eq(s).remove();r.trigger("walk"),r._slideShow()},100)}"undefined"==typeof this.settings.slides[t]&&(t=0),this.slide=t;var e,n,o,a,r=this,h=this.$elmt.children(".vegas-slide"),d=this.settings.slides[t].src,l=this.settings.slides[t].video,c=this._options("delay"),g=this._options("align"),u=this._options("valign"),p=this._options("color")||this.$elmt.css("background-color"),m=this._options("cover")?"cover":"contain",f=h.length,v=this._options("transition"),y=this._options("transitionDuration"),_=this._options("animation"),$=this._options("animationDuration");("random"===v||v instanceof Array)&&(v=this._random(v instanceof Array?v:this.transitions)),v&&"none"!==v&&this.transitions.indexOf(v)<0&&console.error("Vegas: Transition "+v+" doesn't exist."),("auto"===y||y>c)&&(y=c),("random"===_||_ instanceof Array)&&(_=this._random(_ instanceof Array?_:this.animations)),_&&"none"!==_&&this.animations.indexOf(_)<0&&console.error("Vegas: Animation "+_+" doesn't exist."),"auto"===$&&($=c),this.support.video&&l?(o=this._video(l),e=s(o).addClass("vegas-video").addClass("vegas-slide").addClass("vegas-transition-"+v).css("background-color",p),this.support.objectFit?e.css("object-position",g+" "+u).css("object-fit",m).css("width","100%").css("height","100%"):"contain"===m&&e.css("width","100%").css("height","100%")):(a=new Image,e=s("<div></div>").addClass("vegas-slide").addClass("vegas-transition-"+v),n=s("<div></div>").addClass("vegas-slide-inner").css("background-image","url("+d+")").css("background-color",p).css("background-position",g+" "+u).css("background-size",m),_&&n.addClass("vegas-animation-"+_).css("animation-duration",$+"ms"),e.append(n)),r.support.transition||e.css("display","none"),f?h.eq(f-1).after(e):this.$elmt.prepend(e),h.css("transition","all 0ms").each(function(){this.className=" vegas-slide",this.className+=" vegas-transition-"+v,this.className+=" vegas-transition-"+v+"-in","VIDEO"===this.tagName&&(this.className+=" vegas-video")}),r._timer(!1),o?4===o.readyState?(o.currentTime=0,o.play(),i()):o.oncanplay=function(){o.play(),o._started||(o._started=!0,i())}:(a.src=d,a.onload=i)},shuffle:function(){for(var s,t,i=this.total-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),s=this.settings.slides[i],this.settings.slides[i]=this.settings.slides[t],this.settings.slides[t]=s},play:function(){this.paused&&(this.paused=!1,this.next(),this.trigger("play"))},pause:function(){this._timer(!1),this.paused=!0,this.trigger("pause")},toggle:function(){this.paused?this.play():this.pause()},playing:function(){return!this.paused&&!this.noshow},current:function(s){return s?{slide:this.slide,data:this.settings.slides[this.slide]}:this.slide},jump:function(s){0>s||s>this.total-1||s===this.slide||(this.slide=s,this._goto(this.slide))},next:function(){this.slide++,this.slide>=this.total&&(this.slide=0),this._goto(this.slide)},previous:function(){this.slide--,this.slide<0&&(this.slide=this.total-1),this._goto(this.slide)},trigger:function(s){var t=[];"init"!==s&&(t=[this.slide,this.settings.slides[this.slide]]),this.$elmt.trigger("vegas"+s,t),"function"==typeof this.settings[s]&&this.settings[s].apply(this.$elmt,t)},options:function(i,e){var n=this.settings.slides;if("object"==typeof i)this.settings=s.extend({},t,s.vegas.defaults,i);else{if("string"!=typeof i)return this.settings;if(void 0===e)return this.settings[i];this.settings[i]=e}this.settings.slides!==n&&(this.total=this.settings.slides.length,this.noshow=this.total<2,this._preload())}},s.fn.vegas=function(s){var t,i=arguments,n=!1;if(void 0===s||"object"==typeof s)return this.each(function(){this._vegas||(this._vegas=new e(this,s))});if("string"==typeof s){if(this.each(function(){var e=this._vegas;if(!e)throw new Error("No Vegas applied to this element.");"function"==typeof e[s]&&"_"!==s[0]?t=e[s].apply(e,[].slice.call(i,1)):n=!0}),n)throw new Error('No method "'+s+'" in Vegas.');return void 0!==t?t:this}},s.vegas={},s.vegas.defaults=t,s.vegas.isVideoCompatible=function(){return!/(Android|webOS|Phone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent)}}("undefined"!=typeof jQuery?jQuery:"undefined"!=typeof Zepto?Zepto:null);
//# sourceMappingURL=vegas.min.js.map